!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r={},a={x:[0,50],y:[0,50]};r.LotkaVolterra={parameters:{values:{a1:-.18,b1:.047,a2:.38,b2:-.035,x0:12,y0:17},ranges:{a1:[-1,1],b1:[-1,1],a2:[-1,1],b2:[-1,1],x0:[1,30],y0:[1,30]}},annotation:function(){return[`x'(t) = ${this.a1}x(t) + ${this.b1}x(t)y(t)`,`y'(t) = ${this.a2}y(t) + ${this.b2}x(t)y(t)`,`x0 = ${this.x0}, y0 = ${this.y0}`]},title:"Lotka-Volterra model",names:["predator","prey"],func:function*(e){let t=this.x0,n=this.y0,r=(a.x[1]-a.x[0])/e,s=(e,t,n,r)=>n*e+r*e*t,o=(e,t,n,r)=>n*t+r*e*t;for(let l=0;l<r;l++){let r=t+e*s(t,n,this.a1,this.b1),i=n+e*o(t,n,this.a2,this.b2);t=r,n=i,yield{x:a.x[0]+e*l,y:[t,n]}}},range:a};const s={x:[-10,10],y:[-3,3]};r.Sin={parameters:{values:{a:1,b:1},ranges:{a:[-3,3],b:[-10,10]}},annotation:function(){return[`y(x) = ${this.a}sin(${this.b}x)`]},title:"Sin function",names:["sin"],func:function*(e){let t=(s.x[1]-s.x[0])/e,n=s.x[0];for(let r=0;r<t;r++)yield{x:n+e*r,y:[this.a*Math.sin((n+e*r)*this.b)]}},range:s};class o extends React.Component{constructor(e){super(e),this.controlsRef=React.createRef(),this.handleControlsChange=this.handleControlsChange.bind(this)}handleControlsChange(e){this.props.onChange(e)}draw(){const e=new dat.GUI({autoPlace:!1}),t=Object.assign({},this.props.parameters);for(let n of Object.keys(t.values)){t.values[n];e.add(t.values,n,t.ranges[n][0],t.ranges[n][1],.001).onChange(()=>this.handleControlsChange(t))}this.controlsRef.current.appendChild(e.domElement)}componentDidMount(){this.draw()}render(){return React.createElement("div",{className:this.props.className,style:this.props.style,ref:this.controlsRef,style:{position:"absolute",zIndex:1,opacity:.8,display:this.props.show?"block":"none"}})}}class l extends React.Component{constructor(e){super(e),this.plotRef=React.createRef()}calculate(){let e=[],t=this.props.func.call(this.props.parameters.values,.01),n=t.next();for(;!n.done;){let r=n.value.x,a=n.value.y;for(let t=0;t<a.length;t++){let n=a[t];e[t]||e.push({x:[],y:[],name:this.props.names[t]||"-"}),e[t].x.push(r),e[t].y.push(n)}n=t.next()}return e}composeAnnotations(){let e=[],t=this.props.annotation.call(this.props.parameters.values);for(let n=0;n<t.length;n++)e.push({text:t[n],x:0,y:this.props.range.y[1]-3.75*n,xanchor:"left",yanchor:"center",showarrow:!1,font:{family:"Courier New, monopace, sans serif",size:15}});return e}draw(){let e=this.calculate();Plotly.newPlot(this.plotRef.current,e,{annotations:this.composeAnnotations(),title:{text:this.props.title,x:.05,font:{family:"Courier New, monospace, sans serif",size:20}},xaxis:{range:this.props.range.x},yaxis:{range:this.props.range.y}},{staticPlot:!0,responsive:!0})}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}render(){return React.createElement("div",{style:this.props.style,className:this.props.className,ref:this.plotRef})}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class c extends React.Component{constructor(e){super(e),this.state={currentPlot:Object.assign({},r.LotkaVolterra),showController:!1},this.onSelectChange=this.onSelectChange.bind(this),this.onControllerChange=this.onControllerChange.bind(this)}onSelectChange(e){this.setState({currentPlot:Object.assign({},r[e.target.value])})}onControllerChange(e){let t=Object.assign({},this.state.currentPlot);t.parameters=e,this.setState({currentPlot:t})}render(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row align-items-left mt-5"},React.createElement("div",{className:"btn-group ",role:"group"},React.createElement("select",{className:"custom-select btn-outline-secondary ml-5",selected:this.state.currentPlot,onChange:this.onSelectChange},React.createElement("option",{value:"LotkaVolterra"},"Lotka-Volterra"),React.createElement("option",{value:"Sin"},"Sin")),React.createElement("div",{className:"btn btn-outline-secondary",onMouseDown:()=>alert("implement me!")}," +Add ")),React.createElement("div",{className:" ml-3"},React.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",onMouseDown:()=>{this.setState({showController:!this.state.showController})}},"Parameters"),React.createElement(o,{className:"mt-2",key:this.state.currentPlot.title,onChange:this.onControllerChange,parameters:this.state.currentPlot.parameters,show:this.state.showController}))),React.createElement("div",{className:"row h-100"},React.createElement("div",{className:"col-12 h-100"},React.createElement(l,i({style:{height:"90%"}},this.state.currentPlot)))))}}ReactDOM.render(React.createElement(c,null),document.getElementById("root"))}]);